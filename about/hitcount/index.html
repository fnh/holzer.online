<section>
    <table id="statistics" is="sort-able" style="width: 30rem;">
        <tr>
            <th>Path</th>
            <th>Hits</th>
        </tr>
    </table>
</section>

<script src="/scripts/sort-able.js"></script>

<script type="module">
    let response = await fetch("/hits.json");
    let stats = await response.json();

    let { hitCount } = stats;

    Object.entries(hitCount).forEach(([path, hits]) => {
        let row = document.createElement("tr");
        let pathCell = document.createElement("td");
        let anchor = document.createElement("a");
        anchor.href = path;
        anchor.innerHTML = path;
        pathCell.appendChild(anchor);
        let hitsCell = document.createElement("td");
        hitsCell.innerHTML = hits.count;
        row.appendChild(pathCell);
        row.appendChild(hitsCell);
        statistics.tBodies.item(0).appendChild(row);
    });

    statistics.sortBy(1, "asc");
    console.log(statistics);
</script>